## 2026-01-23: Implemented Public vs Invite-Only Mode (Feature 3.6.1)

### What was done:
1. Created database migration (`20250123000000_add_access_mode.sql`) to add `access_mode` column to properties table
   - Values: 'public' (default) or 'invite_only'
   - Added index for access_mode filtering

2. Updated TypeScript types:
   - Added `PropertyAccessMode` type ("public" | "invite_only") to src/types/index.ts
   - Added `accessMode` field to `Property` interface
   - Added `access_mode` field to `DbProperty` interface in src/lib/actions/properties.ts

3. Updated property data loaders:
   - src/lib/content/properties.ts - includes accessMode in property fetch
   - src/lib/utils/property-preview.ts - includes accessMode in preview data

4. Created Access Control UI in property editor:
   - Added "Access Control" section to BasicInfoTab.tsx
   - Radio button toggle between Public and Invite-Only modes
   - Visual styling with icons (Globe for public, Lock for invite-only)
   - Auto-saves on change

5. Added access mode indicator in property editor footer:
   - PropertyEditor.tsx now shows current access mode next to publish status
   - Icon and label: Globe (Public) or Lock (Invite-Only)

6. Created AccessRestricted component:
   - src/components/property/AccessRestricted.tsx
   - Shows when property is invite-only
   - Access code input form (placeholder - validation not yet implemented)
   - Contact host form (placeholder - email sending not yet implemented)
   - Clean UI with lock icon, divider, and success states

7. Updated guest property page:
   - PropertyPageClient.tsx now checks accessMode
   - Renders AccessRestricted component when property is invite-only

### Files created:
- supabase/migrations/20250123000000_add_access_mode.sql
- src/components/property/AccessRestricted.tsx

### Files modified:
- src/types/index.ts
- src/lib/actions/properties.ts
- src/lib/content/properties.ts
- src/lib/utils/property-preview.ts
- src/app/dashboard/properties/[id]/PropertyEditor.tsx
- src/app/dashboard/properties/[id]/tabs/BasicInfoTab.tsx
- src/app/stay/[slug]/PropertyPageClient.tsx
- src/components/property/index.ts
- src/content/properties/sliema-sanctuary.ts
- PRD.md (marked 3.6.1 acceptance criteria as complete)

### Not yet implemented (future features):
- Access code validation against guest_invites table (3.6.3)
- Contact host email sending via Resend (3.6.6)
- These depend on the Guest Invite Management feature (3.6.3)

### Notes:
- Build currently fails due to pre-existing missing embla-carousel-react dependency in landing page components (unrelated to this feature)
- TypeScript and ESLint pass for all files modified in this feature
